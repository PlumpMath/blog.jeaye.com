{% include header.html %}

{% include post_list.html %}

<div id="content">
  <article>
    <section>
      <div class="post_date">
        {{ page.date | date: "%B %d, %Y" }}
      </div>
      <h3>{{ page.title }}</h3>

      {{ content }}
    </section>
  </article>

  <hr />

  <div>
    <h3>Related posts</h3>
    <ul>
      {% for p in site.posts %}

        {% if p.title == page.title %}
          {% continue %}
        {% endif %}

        {% assign same_count = 0 %}
        {% assign common_tags = '' %}

        {% for tag in p.tags %}
          {% if page.tags contains tag %}
            {% assign same_count = same_count | plus: 1 %}
            {% capture tagmarkup %} <span class="label label-default">{{ tag }}</span> {% endcapture %}
            {% assign common_tags = common_tags | append: tagmarkup %}
          {% endif %}
        {% endfor %}

        {% if same_count >= 1 %}
          <li>
            <h4><a href="{{ p.url }}">{{ p.title }}</a>{{ common_tags }}</h4>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
</div>

{% include footer.html %}
